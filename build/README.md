# Releases and Packages

These scripts make it easier to create versioned releases of the 
compiled output of this project (the compiled CMS app).

You should manually create a Github release to match the releases 
generated by these scripts.

You must run these commands from the root directory of this repo (where `package.json` is).

Example:
```
./build/release.sh 2.1 'my message' && ./build/deploy.sh 2.1 ~/cert.pem user@livesite.com
```
NOTE: The release and deploy scripts currently build compiled packages based on the `master` branch, and only support `.deb` and `apt-get` based remote environments (Debian/Ubuntu/etc), although these things can be changed quite easily.
  
  
# The scripts
  
## `release.sh`
  
Create a new release, with the given version number - builds a `.deb` 
of the compiled CMS, and also makes a new commit (of the latest CMS 
build) in the `releases` branch. The `.deb` is built inside the 
Vagrant VM.

##### Example Usage:

```
./build/release.sh 3.1.0 'new UI interface'
```
  

Requires the Vagrant VM to be running (use `vagrant up --provision` 
at the command line).

Give the version number you wish to create (without a leading `v`) 
and the release commit message.

Once you have run `release.sh`, you can then easily create a 
downloadable Github release of the compiled app (CMS) by visiting 
the [Github releases](https://github.com/sc0ttj/Project/releases) page.

For example, create version 1.2.3:

1. click 'Draft a new release'
2. add the tag `v1.2.3`, and choose the `releases` branch
3. attach the `build/Project-cms_1.2.3_all.deb` file
4. publish the release
  
  
  
## `deploy.sh`

This script will copy the generated `Project-cms_VER_all.deb` 
package in `build/` to the given remote environment and install 
it (uses `scp`, `ssh` locally, and `dpkg` and `apt-get` on the remote environment).

##### Example Usage:

```
./build/deploy.sh 1.2.3 ~/mycert.pem user@mysite.com
```

NOTE: This `deploy.sh` script currently only supports installing `.deb` files to remote servers based on Debian/Ubuntu/etc (servers with `apt-get` and `dpkg`). This should be easy enough to update.
