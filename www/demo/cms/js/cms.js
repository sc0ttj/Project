!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var n={},a={},t={},i={}.hasOwnProperty,r=/^\.\.?(\/|$)/,o=function(e,n){for(var a,t=[],i=(r.test(n)?e+"/"+n:n).split("/"),o=0,s=i.length;s>o;o++)a=i[o],".."===a?t.pop():"."!==a&&""!==a&&t.push(a);return t.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},c=function(n){return function(a){var t=o(s(n),a);return e.require(t,n)}},l=function(e,n){var t=null;t=g&&g.createHot(e);var i={id:e,exports:{},hot:t};return a[e]=i,n(i.exports,c(e),i),i.exports},m=function(e){return t[e]?m(t[e]):e},d=function(e,n){return m(o(s(e),n))},u=function(e,t){null==t&&(t="/");var r=m(e);if(i.call(a,r))return a[r].exports;if(i.call(n,r))return l(r,n[r]);throw new Error("Cannot find module '"+e+"' from '"+t+"'")};u.alias=function(e,n){t[n]=e};var v=/\.[^.\/]+$/,f=/\/index(\.[^\/]+)?$/,p=function(e){if(v.test(e)){var n=e.replace(v,"");i.call(t,n)&&t[n].replace(v,"")!==n+"/index"||(t[n]=e)}if(f.test(e)){var a=e.replace(f,"");i.call(t,a)||(t[a]=e)}};u.register=u.define=function(e,t){if("object"==typeof e)for(var r in e)i.call(e,r)&&u.register(r,e[r]);else n[e]=t,delete a[e],p(e)},u.list=function(){var e=[];for(var a in n)i.call(n,a)&&e.push(a);return e};var g=e._hmr&&new e._hmr(d,u,n,a);u._cache=a,u.hmr=g&&g.wrap,u.brunch=!0,e.require=u}}(),function(){var e=window;require.register("cms.js",function(e,n,a){var t=n("cash-dom"),i=n("modules/languages.js"),r=n("modules/loadcss").init,o=n("store"),s=n("zenscroll");a.exports={config:{localStorage:!0,templates:["_hero-center.tmpl","_article-full-width.tmpl","_article-left.tmpl","_article-right.tmpl","_image-center.tmpl","_image-fixed.tmpl","_scrollmation-text-left.tmpl","_stat-text.tmpl","_youtube-full-width.tmpl","_video.tmpl","_video-full-width.tmpl"],sectionSelector:"body .section",sectionContainer:'<div class="section"></div>',editableItems:["h1","h2","p","blockquote","li"],editableClass:"cms-editable",editableRegionClass:"cms-editable-region",inlineMediaRegionSelector:".scrollmation-container p[contenteditable],.article:not(.article-right):not(.article-left) p[contenteditable]",responsiveImageSelector:"picture, .scrollmation-container, .inline-image",videoSelector:"video",mustardClass:"html5 js",api:{upload:"cms/api/upload.php",preview:"cms/api/preview.php",translate:"cms/api/translation.php",save:"cms/api/save.php",logout:"cms/api/logout.php"}},getConfig:function(){return this.config},setConfig:function(e){this.config=e||this.config},init:function(e){return this.setConfig(e),this.pageConfig=app.pageConfig,this.pageDir=window.location.pathname.split("/").slice(0,-1).join("/"),this.restoreProgress(),this.cutsTheMustard()&&this.addMustard(),this.loadStylesheets(),this.setupSmoothScrolling(),this.setLang(),this.ajax=n("modules/ajaxer"),this.modal=n("modules/modal"),this.editor=n("modules/page_editor"),this.videoManager=n("modules/video_manager"),this.imageManager=n("modules/image_manager"),this.sectionManager=n("modules/section_manager"),this.metaManager=n("modules/meta_manager"),this.previewManager=n("modules/preview_manager"),this.exportManager=n("modules/export_manager"),this.templater=n("modules/templater"),this.translationManager=n("modules/translation_manager"),this.vocabEditor=n("modules/vocab_editor"),this.fileManager=n("modules/file_manager"),this.ui=n("modules/ui"),this.modal.init(),this.vocabEditor.init(),this.previewManager.init(),this.exportManager.init(),cms.showTranslation()||translateOnly||(this.editor.init(),this.videoManager.init(),this.imageManager.init(),this.sectionManager.init(),this.metaManager.init(),this.fileManager.init(),this.templater.init(),this.translationManager.init(),this.ui.init()),this.showTranslation()&&this.vocabEditor.translatePage(),!0},setLang:function(){var e=this.getLang();this.lang=this.getLangInfo(e),this.lang.code=e},getLang:function(){var e=t("html")[0].getAttribute("lang");return e.code=e,e||"en"},getLangInfo:function(e){return i[e]},getLanguages:function(){return i},setupSmoothScrolling:function(){var e=400,n=0;s.setup(e,n)},reload:function(){return this.showTranslation()?!1:(cms.editor.setEditableItems(this.config.editableItems),cms.editor.setEditableRegions(this.config.editableRegionClass),cms.editor.setEventHandlers(),cms.videoManager.addVideoClickHandlers(),cms.imageManager.init(),void app.reload())},cutsTheMustard:function(){var e="querySelector"in document&&"localStorage"in window&&"addEventListener"in window;return e},addMustard:function(){document.getElementsByTagName("body")[0].classList.add("cms-html5")},loadStylesheets:function(){var e=["cms/css/vendor.css","cms/css/cms.css"];e.forEach(function(e){r(e)})},showTranslation:function(){return""!=this.getQueryVariable("preview")?!0:!1},autoSave:function(){return this.showTranslation()?!1:void setInterval(this.saveProgress,3e4)},saveProgress:function(){if(cms.showTranslation())return!1;if(!cms.config.localStorage)return!1;var e=t("body").clone(),n=t("head").clone(),a="";e.find(".cms-menu-container, .cms-menu, .cms-modal, .cms-media-btn, .cms-menu-btn").remove(),e.find('#cms-init, link[href^="cms"]').remove(),e.find("body").removeClass("js"),e.find(".video-overlay").removeClass("hidden"),e.find(".video-overlay-button").html("‚ñ∂"),e.find("*").removeClass("scrollmation-image-container-fixed"),a=e.html(),a=cms.exportManager.cleanupWhitespace(a),o.set(this.pageDir+"__head",n.html()),o.set(this.pageDir,a)},restoreProgress:function(){var e=o.get(this.pageDir),n=o.get(this.pageDir+"__head"),a=!1;return cms.config.localStorage?(e&&(t("body").html(e),a=!0),n&&(t("head").html(n),a=!0),void(a&&app.reload())):!1},getQueryVariable:function(e){for(var n=window.location.search.substring(1),a=n.split("&"),t=0;t<a.length;t++){var i=a[t].split("=");if(i[0]==e)return i[1]}return!1}}}),require.register("modules/ajaxer.js",function(e,n,a){var t=[],i=i||0;a.exports={create:function(e,n){return i++,t[i]=new XMLHttpRequest,t[i].open(e,n,!0),t[i]},send:function(e){t[i].send(e)},onProgress:function(e){t[i].upload.onprogress=function(n){n.lengthComputable&&e(n)}},onFinish:function(e,n){t[i].onload=function(){200===t[i].status?e(t[i].responseText):n(t[i].responseText)}}}}),require.register("modules/export_manager.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){return t=cms.exportManager,!0},savePage:function(){cms.ui.hideMenu();var e=t.getPageHTMLWithoutCMS();e=t.addDocType(e),t.saveHtmlToFile(e,t.saveToZip)},getPageHTMLWithoutCMS:function(){var e="",n=i("html").clone();return cms.config.editableItems.forEach(function(e){n.find(e+":empty").remove()}),n.find(".cms-menu-container, .cms-menu, .cms-menu-bg, .cms-modal, .cms-media-btn, .cms-menu-btn, .g-options-container, .cms-script").remove(),n.find("*").removeClass("cms-html5 cms-editable cms-editable-img cms-editable-region cms-inline-media"),n.find("*").removeAttr("contenteditable"),n.find("*").removeAttr("spellcheck"),n.find("*").removeAttr("style"),n.find('p[contenteditable] span:not([class="stat-text-highlight"])').each(function(e){for(var n=e.parentNode;e.firstChild;)n.insertBefore(e.firstChild,e);n.removeChild(e)}),n.find("span:empty").remove(),n.find('script[src^="cms"], #cms-init, link[href^="cms"], .cms-script').remove(),n.find('*[class=""]').removeAttr("class"),n.find("*").removeClass(cms.config.mustardClass),n.find(".scrollmation-text-js").removeClass("full-height"),n.find("*").removeClass("anim-fade-1s transparent scrollmation-text-js scrollmation-image-container-top scrollmation-image-container-fixed scrollmation-image-container-bottom"),n.find(".scrollmation-text").addClass("article"),n.find(".video-overlay").removeClass("hidden"),n.find(".video-overlay-button").html("‚ñ∂"),e=n.html(),e=t.cleanupWhitespace(e)},addDocType:function(e){var n=cms.vocabEditor.getCurrentService()||"en";return'<!DOCTYPE html>\n<html lang="'+n+'" itemscope itemtype="http://schema.org/Article">\n'+e+"</html>"},cleanupWhitespace:function(e){return e=e.replace(/&nbsp;/g," "),e=e.replace(/  /g,""),e=e.replace(/ \n/g,"\n"),e=e.replace(/\n\n/g,"")},saveHtmlToFile:function(e,n){var a=new FormData;a.append("html",e),cms.ajax.create("POST",cms.config.api.preview);var t=function(e){console.log(e),n()},i=function(e){console.log(e)};cms.ajax.onFinish(t,i),cms.ajax.send(a)},saveTranslatedHTML:function(e){var n=new FormData,a="index."+cms.vocabEditor.getCurrentService();e=t.addDocType(e),e=t.cleanupWhitespace(e),n.append("html",e),n.append("lang",a),n.append("save_translation",!0),cms.ajax.create("POST",cms.config.api.translate),cms.ajax.onFinish(function(e){console.log(e),cms.previewManager.showUI(cms.vocabEditor.init)},function(e){console.log(e)}),cms.ajax.send(n)},saveToZip:function(){var e=new FormData;e.append("savetozip","true"),cms.ajax.create("POST",cms.config.api.save);var n=function(e){console.log(e),window.location=e},a=function(e){console.log(e)};cms.ajax.onFinish(n,a),cms.ajax.send(e)}}}),require.register("modules/file_manager.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){return t=cms.fileManager,!0},showUI:function(){var e='\n    <iframe id="file-manager"\n      title="File Manager"\n      width="100%"\n      height="100%"\n      frameborder="0"\n      marginheight="0"\n      marginwidth="0"\n      src="phpfm.php">\n    </iframe>';cms.modal.create({title:"File Manager",contents:e}),cms.modal.show(),i(".cms-modal-viewport").addClass("cms-modal-file-manager")}}}),require.register("modules/image_manager.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){t=this,t.addResponsiveImageClickHandlers()},addResponsiveImageClickHandlers:function(){var e=i(cms.config.responsiveImageSelector);e.off("click",t.onImageClickHandler),e.length>0&&(e.addClass("cms-editable-img"),e.on("click",t.onImageClickHandler))},onImageClickHandler:function(e){var n=this,a=t.getImgSourceElems(n),i=[],i=t.createImgsFromImgSrcElems(a);i.length>0&&(t.currentImage=n,t.showUI(i))},getImgSourceElems:function(e){var n=i(e).children("source, img");return n},createImgsFromImgSrcElems:function(e){if(e.length<1)return"";for(var n=[],a=0;a<e.length;a++){var t=i(e[a]),r=e[a].tagName,o=t.data("name")||"",s=s=o?'data-name="'+o+'"':"",c="";"IMG"===r&&(c=t.attr("src")),"SOURCE"===r&&(c=t.attr("srcset")),n[a]='<img id="preview-image-'+a+'" '+s+' data-index="'+a+'" src="'+c+'" />'}return n},showUI:function(e){var n="";e.forEach(function(e,a){var r=i(e).data("name"),o=t.createUploadBtn(a),s='<p class="cms-modal-image-title">'+r+"</p>";r&&(n+=s),n+=e,n+=o}),cms.modal.create({title:"Image Manager",contents:n}),cms.modal.show();var a=i(".cms-modal-upload-btn");a.each(function(e){var n=i(e);t.fileBtnClickHandler(n)})},fileBtnClickHandler:function(e){e.on("change",function(n){var a=this.files[0];if(!a)return!1;var r=this.files[0].name,o="images/"+r,s=i(this).parent().prev("img"),c=s.attr("id"),l=i("#"+c).data("index");t.currentImgUrl=o,t.currentImgSrcElem=l,t.$currentBtn=i(this).prev("label"),t.$currentBtns=i(".cms-modal-upload-label"),t.updateUploadBtns(t.$currentBtn,t.$currentBtns),t.updatePreviewImage(s,a),e.prop("disabled",!0),t.uploadImage(n,a),e.prop("disabled",!1)})},updateUploadBtns:function(e,n){e.removeClass("cms-modal-upload-label-error"),e.addClass("cms-modal-upload-label-uploading"),i(e).parent().children(".cms-loader").removeClass("cms-loader-hidden"),n.css("pointer-events","none")},updatePreviewImage:function(e,n){var a=new FileReader;a.addEventListener("load",function(){e.attr("src",a.result)},!1),n&&a.readAsDataURL(n)},uploadImage:function(e,n){var a=new FormData(this);a.append("image",n,n.name),e.preventDefault(),cms.ajax.create("POST",cms.config.api.upload),t.setImageUploadEventHandlers(),cms.ajax.send(a)},setImageUploadEventHandlers:function(){var e=t.$currentBtn,n=t.$currentBtns,a=function(n){var a=Math.floor(n.loaded/n.total*100)+"%";e.html("Uploading "+a)},r=function(a){console.log(a),t.updateImgOnPage(),e.html("Upload image"),e.removeClass("cms-modal-upload-label-uploading"),i(e).parent().children(".cms-loader").addClass("cms-loader-hidden"),n.css("pointer-events","all")},o=function(n){console.log(n),e.html("Upload error"),e.addClass("cms-modal-upload-label-error"),i(e).parent().children(".cms-loader").addClass("cms-loader-hidden")};cms.ajax.onProgress(a),cms.ajax.onFinish(r,o)},updateImgOnPage:function(){var e=i(t.currentImage),n=i(e),a=n.children("img, source").eq(t.currentImgSrcElem)[0],r="srcset";a||(a=n.children("source").eq(t.currentImgSrcElem)),a||(a=n.children("img")),"IMG"===a.tagName&&(r="src"),i(a).attr(r,t.currentImgUrl)},createUploadBtn:function(e){var n='      <form id="cms-upload-form-'+e+'" action="/api/upload.php" method="post" class="cms-upload-form cms-upload-form-'+e+'" enctype="multipart/form-data">\n        <div class="cms-loader cms-loader-hidden"></div>\n        <label for="file-upload-'+e+'" id="file-upload-label-'+e+'" class="cms-modal-upload-label">Upload image</label>\n        <input name="image" type="file" id="file-upload-'+e+'" class="cms-modal-upload-btn"  />\n      </form>';return n}}}),require.register("modules/languages.js",function(e,n,a){a.exports={ab:{name:"Abkhaz",nativeName:"–∞“ß—Å—É–∞",direction:"ltr"},aa:{name:"Afar",nativeName:"Afaraf",direction:"ltr"},af:{name:"Afrikaans",nativeName:"Afrikaans",direction:"ltr"},ak:{name:"Akan",nativeName:"Akan",direction:"ltr"},sq:{name:"Albanian",nativeName:"Shqip",direction:"ltr"},am:{name:"Amharic",nativeName:"·ä†·àõ·à≠·äõ",direction:"ltr"},ar:{name:"Arabic",nativeName:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",direction:"rtl"},an:{name:"Aragonese",nativeName:"Aragon√©s",direction:"ltr"},hy:{name:"Armenian",nativeName:"’Ä’°’µ’•÷Ä’•’∂",direction:"ltr"},as:{name:"Assamese",nativeName:"‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ",direction:"ltr"},av:{name:"Avaric",nativeName:"–∞–≤–∞—Ä –º–∞—Ü”Ä, –º–∞–≥”Ä–∞—Ä—É–ª –º–∞—Ü”Ä",direction:"ltr"},ae:{name:"Avestan",nativeName:"avesta",direction:"ltr"},ay:{name:"Aymara",nativeName:"aymar aru",direction:"ltr"},az:{name:"Azerbaijani",nativeName:"az…ôrbaycan dili",direction:"ltr"},bm:{name:"Bambara",nativeName:"bamanankan",direction:"ltr"},ba:{name:"Bashkir",nativeName:"–±–∞—à“°–æ—Ä—Ç —Ç–µ–ª–µ",direction:"ltr"},eu:{name:"Basque",nativeName:"euskara, euskera",direction:"ltr"},be:{name:"Belarusian",nativeName:"–ë–µ–ª–∞—Ä—É—Å–∫–∞—è",direction:"ltr"},bn:{name:"Bengali",nativeName:"‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ",direction:"ltr"},bh:{name:"Bihari",nativeName:"‡§≠‡•ã‡§ú‡§™‡•Å‡§∞‡•Ä",direction:"ltr"},bi:{name:"Bislama",nativeName:"Bislama",direction:"ltr"},bs:{name:"Bosnian",nativeName:"bosanski jezik",direction:"ltr"},br:{name:"Breton",nativeName:"brezhoneg",direction:"ltr"},bg:{name:"Bulgarian",nativeName:"–±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫",direction:"ltr"},my:{name:"Burmese",nativeName:"·Äó·Äô·Ä¨·ÄÖ·Ä¨",direction:"ltr"},ca:{name:"Catalan; Valencian",nativeName:"Catal√†",direction:"ltr"},ch:{name:"Chamorro",nativeName:"Chamoru",direction:"ltr"},ce:{name:"Chechen",nativeName:"–Ω–æ—Ö—á–∏–π–Ω –º–æ—Ç—Ç",direction:"ltr"},ny:{name:"Chichewa; Chewa; Nyanja",nativeName:"chiChe≈µa, chinyanja",direction:"ltr"},zh:{name:"Chinese",nativeName:"‰∏≠Êñá (Zh≈çngw√©n), Ê±âËØ≠, Êº¢Ë™û",direction:"ltr"},cv:{name:"Chuvash",nativeName:"—á”ë–≤–∞—à —á”ó–ª—Ö–∏",direction:"ltr"},kw:{name:"Cornish",nativeName:"Kernewek",direction:"ltr"},co:{name:"Corsican",nativeName:"corsu, lingua corsa",direction:"ltr"},cr:{name:"Cree",nativeName:"·ìÄ·ê¶·êÉ·î≠·êç·êè·ê£",direction:"ltr"},hr:{name:"Croatian",nativeName:"hrvatski",direction:"ltr"},cs:{name:"Czech",nativeName:"ƒçesky, ƒçe≈°tina",direction:"ltr"},da:{name:"Danish",nativeName:"dansk",direction:"ltr"},dv:{name:"Divehi; Dhivehi; Maldivian;",nativeName:"ﬁãﬁ®ﬁàﬁ¨ﬁÄﬁ®",direction:"rtl"},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams",direction:"ltr"},en:{name:"English",nativeName:"English",direction:"ltr"},eo:{name:"Esperanto",nativeName:"Esperanto",direction:"ltr"},et:{name:"Estonian",nativeName:"eesti, eesti keel",direction:"ltr"},ee:{name:"Ewe",nativeName:"E ãegbe",direction:"ltr"},fo:{name:"Faroese",nativeName:"f√∏royskt",direction:"ltr"},fj:{name:"Fijian",nativeName:"vosa Vakaviti",direction:"ltr"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli",direction:"ltr"},fr:{name:"French",nativeName:"fran√ßais, langue fran√ßaise",direction:"ltr"},ff:{name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular",direction:"ltr"},gl:{name:"Galician",nativeName:"Galego",direction:"ltr"},ka:{name:"Georgian",nativeName:"·É•·Éê·É†·Éó·É£·Éö·Éò",direction:"ltr"},de:{name:"German",nativeName:"Deutsch",direction:"ltr"},el:{name:"Greek, Modern",nativeName:"ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨",direction:"ltr"},gn:{name:"Guaran√≠",nativeName:"Ava√±e·∫Ω",direction:"ltr"},gu:{name:"Gujarati",nativeName:"‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä",direction:"ltr"},ht:{name:"Haitian; Haitian Creole",nativeName:"Krey√≤l ayisyen",direction:"ltr"},ha:{name:"Hausa",nativeName:"Hausa, ŸáŸéŸàŸèÿ≥Ÿé",direction:"ltr"},he:{name:"Hebrew (modern)",nativeName:"◊¢◊ë◊®◊ô◊™",direction:"rtl"},hz:{name:"Herero",nativeName:"Otjiherero",direction:"ltr"},hi:{name:"Hindi",nativeName:"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä, ‡§π‡§ø‡§Ç‡§¶‡•Ä",direction:"ltr"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu",direction:"ltr"},hu:{name:"Hungarian",nativeName:"Magyar",direction:"ltr"},ia:{name:"Interlingua",nativeName:"Interlingua",direction:"ltr"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia",direction:"ltr"},ie:{name:"Interlingue",nativeName:"Occidental, Interlingue",direction:"ltr"},ga:{name:"Irish",nativeName:"Gaeilge",direction:"ltr"},ig:{name:"Igbo",nativeName:"As·ª•s·ª• Igbo",direction:"ltr"},ik:{name:"Inupiaq",nativeName:"I√±upiaq, I√±upiatun",direction:"ltr"},io:{name:"Ido",nativeName:"Ido",direction:"ltr"},is:{name:"Icelandic",nativeName:"√çslenska",direction:"ltr"},it:{name:"Italian",nativeName:"Italiano",direction:"ltr"},iu:{name:"Inuktitut",nativeName:"·êÉ·ìÑ·íÉ·ëé·ëê·ë¶",direction:"ltr"},ja:{name:"Japanese",nativeName:"Êó•Êú¨Ë™û („Å´„Åª„Çì„ÅîÔºè„Å´„Å£„ÅΩ„Çì„Åî)",direction:"ltr"},jv:{name:"Javanese",nativeName:"basa Jawa",direction:"ltr"},kl:{name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii",direction:"ltr"},kn:{name:"Kannada",nativeName:"‡≤ï‡≤®‡≥ç‡≤®‡≤°",direction:"ltr"},kr:{name:"Kanuri",nativeName:"Kanuri",direction:"ltr"},ks:{name:"Kashmiri",nativeName:"‡§ï‡§∂‡•ç‡§Æ‡•Ä‡§∞‡•Ä, ŸÉÿ¥ŸÖŸäÿ±Ÿä‚Äé",direction:"rtl"},kk:{name:"Kazakh",nativeName:"“ö–∞–∑–∞“õ —Ç—ñ–ª—ñ",direction:"ltr"},km:{name:"Khmer",nativeName:"·ûó·û∂·ûü·û∂·ûÅ·üí·ûò·üÇ·ûö",direction:"ltr"},ki:{name:"Kikuyu, Gikuyu",nativeName:"Gƒ©k≈©y≈©",direction:"ltr"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda",direction:"ltr"},ky:{name:"Kirghiz, Kyrgyz",nativeName:"–∫—ã—Ä–≥—ã–∑ —Ç–∏–ª–∏",direction:"ltr"},kv:{name:"Komi",nativeName:"–∫–æ–º–∏ –∫—ã–≤",direction:"ltr"},kg:{name:"Kongo",nativeName:"KiKongo",direction:"ltr"},ko:{name:"Korean",nativeName:"ÌïúÍµ≠Ïñ¥ (ÈüìÂúãË™û), Ï°∞ÏÑ†Îßê (ÊúùÈÆÆË™û)",direction:"ltr"},ku:{name:"Kurdish",nativeName:"Kurd√Æ, ŸÉŸàÿ±ÿØ€å‚Äé",direction:"rtl"},kj:{name:"Kwanyama, Kuanyama",nativeName:"Kuanyama",direction:"ltr"},la:{name:"Latin",nativeName:"latine, lingua latina",direction:"ltr"},lb:{name:"Luxembourgish, Letzeburgesch",nativeName:"L√´tzebuergesch",direction:"ltr"},lg:{name:"Luganda",nativeName:"Luganda",direction:"ltr"},li:{name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs",direction:"ltr"},ln:{name:"Lingala",nativeName:"Ling√°la",direction:"ltr"},lo:{name:"Lao",nativeName:"‡∫û‡∫≤‡∫™‡∫≤‡∫•‡∫≤‡∫ß",direction:"ltr"},lt:{name:"Lithuanian",nativeName:"lietuvi≈≥ kalba",direction:"ltr"},lu:{name:"Luba-Katanga",nativeName:"",direction:"ltr"},lv:{name:"Latvian",nativeName:"latvie≈°u valoda",direction:"ltr"},gv:{name:"Manx",nativeName:"Gaelg, Gailck",direction:"ltr"},mk:{name:"Macedonian",nativeName:"–º–∞–∫–µ–¥–æ–Ω—Å–∫–∏ —ò–∞–∑–∏–∫",direction:"ltr"},mg:{name:"Malagasy",nativeName:"Malagasy fiteny",direction:"ltr"},ms:{name:"Malay",nativeName:"bahasa Melayu, ÿ®Ÿáÿßÿ≥ ŸÖŸÑÿßŸäŸà‚Äé",direction:"rtl"},ml:{name:"Malayalam",nativeName:"‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç",direction:"rtl"},mt:{name:"Maltese",nativeName:"Malti",direction:"ltr"},mi:{name:"MƒÅori",nativeName:"te reo MƒÅori",direction:"ltr"},mr:{name:"Marathi (MarƒÅ·π≠hƒ´)",nativeName:"‡§Æ‡§∞‡§æ‡§†‡•Ä",direction:"ltr"},mh:{name:"Marshallese",nativeName:"Kajin MÃßajeƒº",direction:"ltr"},mn:{name:"Mongolian",nativeName:"–º–æ–Ω–≥–æ–ª",direction:"ltr"},na:{name:"Nauru",nativeName:"Ekakair≈© Naoero",direction:"ltr"},nv:{name:"Navajo, Navaho",nativeName:"Din√© bizaad, Din√©k ºeh«∞√≠",direction:"ltr"},nb:{name:"Norwegian Bokm√•l",nativeName:"Norsk bokm√•l",direction:"ltr"},nd:{name:"North Ndebele",nativeName:"isiNdebele",direction:"ltr"},ne:{name:"Nepali",nativeName:"‡§®‡•á‡§™‡§æ‡§≤‡•Ä",direction:"ltr"},ng:{name:"Ndonga",nativeName:"Owambo",direction:"ltr"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk",direction:"ltr"},no:{name:"Norwegian",nativeName:"Norsk",direction:"ltr"},ii:{name:"Nuosu",nativeName:"ÍÜàÍå†Ííø Nuosuhxop",direction:"ltr"},nr:{name:"South Ndebele",nativeName:"isiNdebele",direction:"ltr"},oc:{name:"Occitan",nativeName:"Occitan",direction:"ltr"},oj:{name:"Ojibwe, Ojibwa",nativeName:"·êä·ìÇ·îë·ìà·êØ·íß·êé·ìê",direction:"ltr"},cu:{name:"Old (Church) Slavonic/Slavic, Old Bulgarian",nativeName:"—©–∑—ã–∫—ä —Å–ª–æ–≤—£–Ω—å—Å–∫—ä",direction:"ltr"},om:{name:"Oromo",nativeName:"Afaan Oromoo",direction:"ltr"},or:{name:"Oriya",nativeName:"‡¨ì‡¨°‡¨º‡¨ø‡¨Ü",direction:"ltr"},os:{name:"Ossetian, Ossetic",nativeName:"–∏—Ä–æ–Ω √¶–≤–∑–∞–≥",direction:"ltr"},pa:{name:"Panjabi, Punjabi",nativeName:"‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä, ŸæŸÜÿ¨ÿßÿ®€å‚Äé",direction:"rtl"},pi:{name:"PƒÅli",nativeName:"‡§™‡§æ‡§¥‡§ø",direction:"ltr"},fa:{name:"Persian",nativeName:"ŸÅÿßÿ±ÿ≥€å",direction:"rtl"},pl:{name:"Polish",nativeName:"polski",direction:"ltr"},ps:{name:"Pashto, Pushto",nativeName:"Ÿæ⁄öÿ™Ÿà",direction:"rtl"},pt:{name:"Portuguese",nativeName:"Portugu√™s",direction:"ltr"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa",direction:"ltr"},rm:{name:"Romansh",nativeName:"rumantsch grischun",direction:"ltr"},rn:{name:"Kirundi",nativeName:"kiRundi",direction:"ltr"},ro:{name:"Romanian, Moldavian, Moldovan",nativeName:"rom√¢nƒÉ",direction:"ltr"},ru:{name:"Russian",nativeName:"—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫",direction:"ltr"},sa:{name:"Sanskrit (Sa·πÅsk·πõta)",nativeName:"‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§Æ‡•ç",direction:"ltr"},sc:{name:"Sardinian",nativeName:"sardu",direction:"ltr"},sd:{name:"Sindhi",nativeName:"‡§∏‡§ø‡§®‡•ç‡§ß‡•Ä, ÿ≥ŸÜ⁄åŸäÿå ÿ≥ŸÜÿØ⁄æ€å‚Äé",direction:"rtl"},se:{name:"Northern Sami",nativeName:"Davvis√°megiella",direction:"ltr"},sm:{name:"Samoan",nativeName:"gagana faa Samoa",direction:"ltr"},sg:{name:"Sango",nativeName:"y√¢ng√¢ t√Æ s√§ng√∂",direction:"ltr"},sr:{name:"Serbian",nativeName:"—Å—Ä–ø—Å–∫–∏ —ò–µ–∑–∏–∫",direction:"ltr"},gd:{name:"Scottish Gaelic; Gaelic",nativeName:"G√†idhlig",direction:"ltr"},sn:{name:"Shona",nativeName:"chiShona",direction:"ltr"},si:{name:"Sinhala, Sinhalese",nativeName:"‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω",direction:"ltr"},sk:{name:"Slovak",nativeName:"slovenƒçina",direction:"ltr"},sl:{name:"Slovene",nativeName:"sloven≈°ƒçina",direction:"ltr"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali",direction:"ltr"},st:{name:"Southern Sotho",nativeName:"Sesotho",direction:"ltr"},es:{name:"Spanish; Castilian",nativeName:"espa√±ol, castellano",direction:"ltr"},su:{name:"Sundanese",nativeName:"Basa Sunda",direction:"ltr"},sw:{name:"Swahili",nativeName:"Kiswahili",direction:"ltr"},ss:{name:"Swati",nativeName:"SiSwati",direction:"ltr"},sv:{name:"Swedish",nativeName:"svenska",direction:"ltr"},ta:{name:"Tamil",nativeName:"‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç",direction:"ltr"},te:{name:"Telugu",nativeName:"‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å",direction:"ltr"},tg:{name:"Tajik",nativeName:"—Ç–æ“∑–∏–∫”£, toƒüikƒ´, ÿ™ÿßÿ¨€å⁄©€å‚Äé",direction:"ltr"},th:{name:"Thai",nativeName:"‡πÑ‡∏ó‡∏¢",direction:"ltr"},ti:{name:"Tigrinya",nativeName:"·âµ·åç·à≠·äõ",direction:"ltr"},bo:{name:"Tibetan Standard, Tibetan, Central",nativeName:"‡Ωñ‡Ωº‡Ωë‡ºã‡Ω°‡Ω≤‡ΩÇ",direction:"ltr"},tk:{name:"Turkmen",nativeName:"T√ºrkmen, –¢“Ø—Ä–∫–º–µ–Ω",direction:"ltr"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog, ·úè·úí·úÉ·úÖ·úî ·úÜ·úÑ·úé·úì·úÑ·úî",direction:"ltr"},tn:{name:"Tswana",nativeName:"Setswana",direction:"ltr"},to:{name:"Tonga (Tonga Islands)",nativeName:"faka Tonga",direction:"ltr"},tr:{name:"Turkish",nativeName:"T√ºrk√ße",direction:"ltr"},ts:{name:"Tsonga",nativeName:"Xitsonga",direction:"ltr"},tt:{name:"Tatar",nativeName:"—Ç–∞—Ç–∞—Ä—á–∞, tatar√ßa, ÿ™ÿßÿ™ÿßÿ±⁄Üÿß‚Äé",direction:"ltr"},tw:{name:"Twi",nativeName:"Twi",direction:"ltr"},ty:{name:"Tahitian",nativeName:"Reo Tahiti",direction:"ltr"},ug:{name:"Uighur, Uyghur",nativeName:"Uy∆£urq…ô, ÿ¶€áŸäÿ∫€áÿ±⁄Ü€ï‚Äé",direction:"ltr"},uk:{name:"Ukrainian",nativeName:"—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞",direction:"ltr"},ur:{name:"Urdu",nativeName:"ÿßÿ±ÿØŸà",direction:"rtl"},uz:{name:"Uzbek",nativeName:"zbek, –é–∑–±–µ–∫, ÿ£€áÿ≤ÿ®€êŸÉ‚Äé",direction:"ltr"},ve:{name:"Venda",nativeName:"Tshiven·∏ìa",direction:"ltr"},vi:{name:"Vietnamese",nativeName:"Ti·∫øng Vi·ªát",direction:"ltr"},vo:{name:"Volap√ºk",nativeName:"Volap√ºk",direction:"ltr"},wa:{name:"Walloon",nativeName:"Walon",direction:"ltr"},cy:{name:"Welsh",nativeName:"Cymraeg",direction:"ltr"},wo:{name:"Wolof",nativeName:"Wollof",direction:"ltr"},fy:{name:"Western Frisian",nativeName:"Frysk",direction:"ltr"},xh:{name:"Xhosa",nativeName:"isiXhosa",direction:"ltr"},yi:{name:"Yiddish",nativeName:"◊ô◊ô÷¥◊ì◊ô◊©",direction:"rtl"},yo:{name:"Yoruba",nativeName:"Yor√πb√°",direction:"ltr"},za:{name:"Zhuang, Chuang",nativeName:"Sa…Ø cue≈ã∆Ö, Saw cuengh",direction:"ltr"}}}),require.register("modules/loadcss.js",function(n,a,t){!function(e){"use strict";var a=function(n,a,t){function i(e){return s.body?e():void setTimeout(function(){i(e)})}function r(){c.addEventListener&&c.removeEventListener("load",r),c.media=t||"all"}var o,s=e.document,c=s.createElement("link");if(a)o=a;else{var l=(s.body||s.getElementsByTagName("head")[0]).childNodes;o=l[l.length-1]}var m=s.styleSheets;c.rel="stylesheet",c.href=n,c.media="only x",i(function(){o.parentNode.insertBefore(c,a?o:o.nextSibling)});var d=function(e){for(var n=c.href,a=m.length;a--;)if(m[a].href===n)return e();setTimeout(function(){d(e)})};return c.addEventListener&&c.addEventListener("load",r),c.onloadcssdefined=d,d(r),c};"undefined"!=typeof n?n.init=a:e.loadCSS=a}("undefined"!=typeof e?e:this)}),require.register("modules/meta_manager.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){t=this},showUI:function(){var e="",n=i("head").find('meta[name^="title"], meta[name^="description"], meta[name^="author"], meta[name^="keywords"], meta[name^="news_keywords"], meta[name^="copyright"]'),a=i("head").find('meta[name^="twitter"]'),r=i("head").find("meta[property]"),o=i("head").find("meta[itemprop]"),s=function(n,a){var t="name";"Facebook"===n?t="property":"Google+"===n&&(t="itemprop"),e+='<h3 class="cms-meta-group-header">'+n+"</h3>\n\r",a.each(function(n){var a=n.attributes.content.nodeValue,r=i(n).attr("itemprop");r||(r=i(n).attr("property")),r||(r=i(n).attr("name")),e+='        <label>\n\r          <p class="cms-meta-key">'+r+'</p>\n\r          <input data-type="'+t+'" name="'+r+'" class="cms-meta-value" type="text" value="'+a+'" size="25" />\n\r        </label>\n\r'})};e='<form name="cms-meta-form" class="cms-meta-form" action="" method="POST">\n\r',s("Meta Info",n),s("Twitter",a),s("Facebook",r),s("Google+",o),e+="</form>\n\r",cms.modal.create({title:"Edit Meta Info",contents:e}),cms.modal.show(),t.addEventHandlers()},addEventHandlers:function(){i("input.cms-meta-value").on("change",function(e){var n=i(this).data("type"),a=i(this).attr("name"),r=i(this).val();t.updateMeta(n,a,r)})},updateMeta:function(e,n,a){var t=i("head").find("meta["+e+'^="'+n+'"]');"title"===n&&i("head title").text(a),a?i(t).attr("content",a):i(t).attr("content","")}}}),require.register("modules/modal.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){t=this},create:function(e){var n=t.getHtml(e),a=e.callback;t.html=n,t.addToPage(),t.setContents(e.contents),t.callback="","function"==typeof a&&(t.callback=a)},getHtml:function(e){var n="",a=t.getTemplate();return n=cms.templater.renderTemplate(a,e)},getTemplate:function(){return'      <div class="cms-modal cms-anim-fade-250ms cms-transparent cms-hidden">\n        <div class="cms-modal-header-container">\n          <button class="cms-modal-back-btn">Back</button>\n          <h3 class="cms-modal-header">{{title}}</h3>\n        </div>\n        <div class="cms-modal-viewport"></div>\n      </div>'},addToPage:function(){i("body").append(t.html)},setContents:function(e){var n=i(".cms-modal-viewport");n&&n.html(e)},show:function(){var e=i(".cms-modal"),n=i(".cms-modal-back-btn");cms.saveProgress(),i("body").addClass("cms-noscroll"),e.removeClass("cms-transparent cms-disabled cms-hidden"),n.on("click",t.backBtnClickHandler)},backBtnClickHandler:function(e){t.hide(),"function"==typeof t.callback&&t.callback()},hide:function(){var e=i(".cms-modal"),n=i(".cms-modal-back-btn");i("body").removeClass("cms-noscroll"),e.addClass("cms-transparent cms-disabled cms-hidden"),n.off("click",t.hide),t.remove(),cms.saveProgress()},remove:function(){i(".cms-modal").remove()}}}),require.register("modules/page_editor.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){t=this,document.body.setAttribute("spellcheck",!1),t.isInFirefox="undefined"!=typeof InstallTrigger,t.createMediaBtn(),t.setEditableItems(cms.config.editableItems),t.setEditableRegions(cms.config.editableRegionClass),t.nextEditableElem=i("contenteditable")[0],t.setEventHandlers()},createMediaBtn:function(){t.mediaBtn='    <div id="cms-media-btn"          class="cms-media-btn cms-anim-fade-500ms cms-transparent"         contenteditable="false"         onclick="mediaBtnClickHandler(this);">      ADD MEDIA    </div>',mediaBtnClickHandler=function(e){var n='<picture><img class="inline-image" alt="inline image" src=images/placeholders/550x550.png /></picture>',a=i(e),t=a;a.hasClass("cms-media-btn")&&(t=a.parent()),t.after(n),t.children(".cms-media-btn").remove()}},setEditableItems:function(e){e.forEach(function(e,n){var a=i(cms.config.sectionSelector+" "+e);a.attr("contenteditable",!0),a.addClass(cms.config.editableClass)})},setEditableRegions:function(e){var n=e.replace(/^\./,""),a=i(cms.config.sectionSelector+" ."+n);a.attr("contenteditable",!0),a.addClass(cms.config.editableRegionClass),t.addMediaButtons()},setEventHandlers:function(){var e=t.getEditableItems();e.off("focus",t.onEditableFocusHandler),e.off("blur",t.onEditableBlurHandler),e.off("keypress",t.onEditableKeyPressHandler),e.on("focus",t.onEditableFocusHandler),e.on("blur",t.onEditableBlurHandler),e.on("keypress",t.onEditableKeyPressHandler),t.onHighlightTextHandler()},getEditableItems:function(){var e=i("[contenteditable]");return e},onHighlightTextHandler:function(){var e="."+cms.config.editableRegionClass,n=document.querySelectorAll(e);grande.bind(n)},onEditableKeyPressHandler:function(e){var n=this;return 13===e.which?(t.elemIsContainer(n)||(e.preventDefault(),t.nextEditableItemExists&&t.nextEditableElem.focus()),!1):void 0},addMediaButtons:function(){i(cms.config.inlineMediaRegionSelector).each(function(){var e=i(this),n=e.children(".cms-media-btn").length<1;n&&e.append(t.mediaBtn)})},onEditableBlurHandler:function(e){var n=this,a=i(n),r=t.elemIsEmpty(n),o=t.elemIsContainer(n);r&&o&&a.remove(),t.addMediaButtons(),t.removeLeftOverMediaBtns(n),cms.saveProgress()},onEditableFocusHandler:function(e){var n=this;t.nextEditableElem=t.getNextEditableItem(n),t.nextEditableItemExists="{}"===t.nextEditableElem||"undefined"!=typeof t.nextEditableElem,t.removeLeftOverMediaBtns(n),cms.imageManager.addResponsiveImageClickHandlers(),i(this).find('span:not([class="stat-text-highlight"])').each(function(e){for(var n=e.parentNode;e.firstChild;)n.insertBefore(e.firstChild,e);n.removeChild(e)})},getNextEditableItem:function(e){var n=i("[contenteditable]").eq(i("[contenteditable]").index(i(e))+1)[0];return n},elemIsEmpty:function(e){var n=""===e.innerHTML||0===e.innerHTML.indexOf("<br>")||"\n"===e.innerHTML||'""'===e.innerHTML||"<br>"===e.innerHTML||"<strong></strong>"===e.innerHTML||"<span></span>"===e.innerHTML||"<b></b>"===e.innerHTML||"<i></i>"===e.innerHTML||"<em></em>"===e.innerHTML||"<div></div>"===e.innerHTML;return n?(e.innerHTML="",!0):!1},elemIsContainer:function(e){var n=i(e).children("[contenteditable]").length>0;return n?!0:!1},removeLeftOverMediaBtns:function(e){i(e).children().each(function(e){t.onlyContainsMediaBtn(e)&&i(e).remove()}),t.onlyContainsMediaBtn(e)&&i(e).remove()},onlyContainsMediaBtn:function(e){var n=0===e.innerHTML.indexOf('<div id="cms-media-btn"');return n},getTextBlockContainer:function(e){for(;e;){if(1==e.nodeType)return e;e=e.parentNode}},getTextAfterCaret:function(){var e=window.getSelection();if(e.rangeCount){var n=e.getRangeAt(0),a=t.getTextBlockContainer(n.endContainer);if(a){var i=n.cloneRange();return i.selectNodeContents(a),i.setStart(n.endContainer,n.endOffset),
i.extractContents()}}}}}),require.register("modules/preview_manager.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){return t=cms.previewManager,!0},previewPage:function(){cms.ui.hideMenu();var e=cms.exportManager.getPageHTMLWithoutCMS();e=cms.exportManager.addDocType(e),cms.exportManager.saveHtmlToFile(e,t.showUI)},showUI:function(e){var n=cms.vocabEditor.getCurrentService(),a="index."+n,r=cms.getLangInfo(n);"en"===n&&(a="preview");var o='<div class="cms-iframe-resizer">      <button class="cms-iframe-resizer-btn" data-width="320px"  data-height="568px">  iPhone 5  </button>      <button class="cms-iframe-resizer-btn" data-width="360px"  data-height="640px">  Galaxy S5 </button>      <button class="cms-iframe-resizer-btn" data-width="414px"  data-height="736px">  iPhone 6  </button>      <button class="cms-iframe-resizer-btn cms-iframe-resizer-btn-ipad" data-width="1024px" data-height="768px">  iPad      </button>      <button class="cms-iframe-resizer-btn" data-width="100%" data-height="100%">     Full      </button>      <button class="cms-iframe-resizer-btn cms-iframe-resizer-btn-orientation cms-hidden" data-orientation="switch" style="display:none;"> Rotate ‚ü≥ </button>    </div>    <iframe id="pagePreview"      title="Preview ('+r.name+')"      width="100%"      height="100%"      frameborder="0"      marginheight="0"      marginwidth="0"      src="'+a+".html?c"+Math.random()+'">    </iframe>';cms.modal.create({title:"Preview ("+r.name+")",contents:o,callback:e}),cms.modal.show(),cms.showTranslation()&&i(".cms-modal-back-btn").addClass("cms-hidden"),i(".cms-modal-viewport").addClass("cms-modal-viewport-previewer"),t.iframeResizeBtnClickHandler()},iframeResizeBtnClickHandler:function(){i(".cms-iframe-resizer-btn").on("click",function(){var e,n,a=i(this),t=i("#pagePreview")[0],r=i(this).data("orientation")||"",o=i(".cms-iframe-resizer-btn-orientation");"switch"===r?(n=t.height,e=t.width):(n=a.data("width"),e=a.data("height")),t.width=n,t.height=e,"100%"==t.width?(o.addClass("cms-hidden"),o.css("display","none")):(o.removeClass("cms-hidden"),o.css("display","inline-block"))})}}}),require.register("modules/section_manager.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){t=this},showUI:function(){t.sectionPreviews=t.getSectionPreviewImgs(),cms.modal.create({title:"Section Manager",contents:t.sectionPreviews}),cms.modal.show(),i(".cms-modal-viewport").addClass("cms-modal-viewport-sections"),t.$previewImgs=i(".cms-modal-viewport").children(),t.$previewImgs.on("click",t.sectionPreviewClickHandler)},getSectionPreviewImgs:function(){var e="";return cms.config.templates.forEach(function(n,a){var t='<img id="'+n+'" src="cms/images/previews/'+n+'.png" alt="'+n+'" />';e+=t}),e},sectionPreviewClickHandler:function(e){t.getTemplateFromFile(this.id)},getTemplateFromFile:function(e){cms.ajax.create("GET","templates/"+e);var n=function(e){var n=cms.templater.renderTemplate(e,cms.pageConfig);t.addTemplateToPage(n),t.reIndexSections(),cms.modal.hide(),cms.ui.showMenu(),cms.reload()},a=function(){alert("error")};cms.ajax.onFinish(n,a),cms.ajax.send(null)},addTemplateToPage:function(e){i(cms.config.sectionSelector).last().after(cms.config.sectionContainer),i(cms.config.sectionSelector).last().html(e)},moveSectionUp:function(e){var n=i(".section"+e);n.prev().before(n)},moveSectionDown:function(e){var n=i(".section"+e);n.next().after(n)},removeSection:function(e){if(i(cms.config.sectionSelector).length<2)return!1;var n=i(".section"+e);n.remove()},reIndexSections:function(){var e=i(cms.config.sectionSelector);e.each(function(e,n){var a=i(this),t=".section"+(n+1);i(t).removeClass("section"+(n+1)),a.addClass("section"+(n+1)),a.attr("id","section"+(n+1))})}}}),require.register("modules/templater.js",function(e,n,a){var t=n("cash-dom"),i=n("mustache");a.exports={init:function(){var e=this.getSections();return e.each(this.numberTheSections),!0},getSections:function(){var e=t(cms.config.sectionSelector);return e},numberTheSections:function(e,n){t(e).addClass("section"+(n+1)),t(e).attr("id","section"+(n+1))},renderTemplate:function(e,n){return i.parse(e),i.render(e,n)}}}),require.register("modules/translation_manager.js",function(e,n,a){var t,i=n("cash-dom"),r=n("store");a.exports={init:function(){return t=cms.translationManager,t.restoreTranslationSettings(),!0},restoreTranslationSettings:function(){var e=cms.getLanguages(),n=r.get(cms.pageDir+"__translations");n?cms.translation=n:(cms.translation={},Object.keys(e).forEach(function(n){cms.translation[n]={name:"",enabled:!1},cms.translation[n].name=e[n].name}))},showUI:function(){var e="",n=t.removeEventHandlers;e+='<input       type="text"       class="cms-trans-autocomplete"       placeholder="Enter language name.." />      <div class="cms-trans-table-container">',e+=t.buildTranslationsTable(),e+="</div>",cms.modal.create({title:"Manage Translations",contents:e,callback:n}),cms.modal.show(),t.addEventHandlers()},buildTranslationsTable:function(){var e=cms.getLanguages(),n='<table id="cms-trans-table" class="cms-trans-table">';return n+='<thead>    <tr class="cms-trans-table-header">       <th>code</th>       <th>name</th>       <th class="cms-trans-header-native-name">native name</th>       <th>editor</th>       <th>password</th>       <th>enabled</th>     </tr>     </thead>     <tbody>',Object.keys(e).forEach(function(a){var t=a,i=e[t].name,r=e[t].nativeName;n+='\n      <tr class="cms-trans-row">\n        <td class="cms-trans-code" data-label="code:">\n          '+t+'\n        </td>\n        <td class="cms-trans-name" data-label="name:">\n          '+i+'\n        </td>\n        <td class="cms-trans-native-name" data-label="native name:" dir="'+e[t].direction+'" >\n          '+r+"\n        </td>\n",n+=cms.translation[t].enabled===!1?'          <td class="cms-trans-url" data-label="editor:">\n            -\n          </td>\n          <td class="cms-trans-passwd" data-label="password:">\n            -\n          </td>\n          <td class="cms-trans-enabled" data-label="">\n            <button data-lang="'+t+'" class="cms-trans-btn cms-trans-btn-enable">Enable</button>\n          </td>\n':'          <td class="cms-trans-url" data-label="editor:">\n            <a href="?translate='+t+'" target="_blank" title="Edit '+i+'">Edit</a>\n          </td>\n          <td class="cms-trans-passwd" data-label="password:">\n            '+cms.translation[t].passwd+'\n          </td>\n          <td class="cms-trans-disabled" data-label="">\n            <button data-lang="'+t+'" class="cms-trans-btn cms-trans-btn-disable">Disable</button>\n          </td>\n',n+="</tr>"}),n+="</tbody></table>"},updateTable:function(){var e=t.buildTranslationsTable();t.removeEventHandlers(),i(".cms-trans-table-container").html(e),t.autoCompleteHandler(),t.addEventHandlers(),r.set(cms.pageDir+"__translations",cms.translation)},addEventHandlers:function(){i(".cms-trans-autocomplete").on("keyup",t.autoCompleteHandler),i(".cms-trans-autocomplete").on("change",t.autoCompleteHandler),i(".cms-trans-btn-enable").on("click",t.enableBtnHandler),i(".cms-trans-btn-disable").on("click",t.disableBtnHandler)},autoCompleteHandler:function(){var e,n,a,t,r;for(e=i(".cms-trans-autocomplete")[0],n=e.value.toUpperCase(),a=document.getElementById("cms-trans-table"),t=i(a).find("tr:not(.cms-trans-table-header)"),r=0;r<t.length;r++){var o=t[r].getElementsByTagName("td")[0],s=t[r].getElementsByTagName("td")[1],c=t[r].getElementsByTagName("td")[2],l=!1;o&&o.innerHTML.toUpperCase().indexOf(n)>-1?l=!0:s&&s.innerHTML.toUpperCase().indexOf(n)>-1?l=!0:c&&c.innerHTML.toUpperCase().indexOf(n)>-1&&(l=!0),l?t[r].style.display="":t[r].style.display="none"}},enableBtnHandler:function(){var e=i(this).attr("data-lang");t.getTranslatorPasswd(e,function(n){""!==n&&(cms.translation[e].enabled=!0,cms.translation[e].passwd=n,t.updateTable())})},disableBtnHandler:function(){var e=i(this).attr("data-lang");cms.translation[e].enabled=!1,t.updateTable()},getTranslatorPasswd:function(e,n){var a=new FormData;a.append("get_passwd",!0);var i=function(e){"function"==typeof n&&n(e)},r=function(n){t.createTranslatorPasswd(e,function(n){cms.translation[e].enabled=!0,cms.translation[e].passwd=n,t.updateTable()})};cms.ajax.create("POST","cms/api/passwds/"+e+".php"),cms.ajax.onFinish(i,r),cms.ajax.send(a)},createTranslatorPasswd:function(e,n){var a=new FormData;a.append("lang",e),a.append("enable_translation",!0);var t=function(e){"function"==typeof n&&n(e)},i=function(n){console.log("error creating password for translation "+e,n)};cms.ajax.create("POST",cms.config.api.translate),cms.ajax.onFinish(t,i),cms.ajax.send(a)},removeEventHandlers:function(){i(".cms-trans-btn-enable").off("click",t.enableBtnHandler),i(".cms-trans-btn-disable").off("click",t.disableBtnHandler),i(".cms-trans-autocomplete").off("keyup",t.autoCompleteHandler),i(".cms-trans-autocomplete").off("change",t.autoCompleteHandler)}}}),require.register("modules/ui.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){return t=this,t.addUI(),!0},addUI:function(){var e=this.getMenuHtml(),n='<button class="cms-menu-btn cms-unselectable clear">‚ò∞</button>';i("body").append('<div class="cms-menu-container">'+e+"</div>"),i("body").append(n),t.getUIComponents(),t.setUIEventHandlers()},getUIComponents:function(){t.$menu=i(".cms-menu"),t.$menuBg=i(".cms-menu-bg"),t.$menuBtn=i(".cms-menu-btn"),t.$menuItems=i(".cms-menu-item"),t.$menuItemUp=i(".cms-menu-item-icon-up"),t.$menuItemDown=i(".cms-menu-item-icon-down"),t.$menuItemDelete=i(".cms-menu-item-icon-delete"),t.$menuBtnSave=i(".cms-menu-item-save"),t.$menuBtnPreview=i(".cms-menu-item-preview"),t.$menuBtnAddSection=i(".cms-menu-item-add-section"),t.$menuBtnMeta=i(".cms-menu-item-meta"),t.$menuBtnFiles=i(".cms-menu-item-files"),t.$menuBtnLogout=i(".cms-menu-item-logout"),t.$menuBtnTranslations=i(".cms-menu-item-translations")},setUIEventHandlers:function(){t.$menuBg.on("click",t.menuBgClickHandler),t.$menuBtn.on("click",t.menuBtnClickHandler),t.$menuItemUp.on("click",t.menuItemUpClickHandler),t.$menuItemDown.on("click",t.menuItemDownClickHandler),t.$menuItemDelete.on("click",t.menuItemDeleteClickHandler),t.$menuBtnPreview.on("click",t.menuBtnPreviewClickHandler),t.$menuBtnSave.on("click",t.menuBtnSaveClickHandler),t.$menuBtnAddSection.on("click",t.menuBtnAddSectionClickHandler),t.$menuBtnMeta.on("click",t.menuBtnMetaClickHandler),t.$menuBtnFiles.on("click",t.menuBtnFilesClickHandler),t.$menuBtnLogout.on("click",t.menuBtnLogoutClickHandler),t.$menuBtnTranslations.on("click",t.menuBtnTranslationsClickHandler)},setUIEventHandlersOff:function(){t.$menuBg.off("click",t.menuBgClickHandler),t.$menuBtn.off("click",t.menuBtnClickHandler),t.$menuItemUp.off("click",t.menuItemUpClickHandler),t.$menuItemDown.off("click",t.menuItemDownClickHandler),t.$menuItemDelete.off("click",t.menuItemDeleteClickHandler),t.$menuBtnPreview.off("click",t.menuBtnPreviewClickHandler),t.$menuBtnSave.off("click",t.menuBtnSaveClickHandler),t.$menuBtnAddSection.off("click",t.menuBtnAddSectionClickHandler),t.$menuBtnMeta.off("click",t.menuBtnMetaClickHandler),t.$menuBtnFiles.off("click",t.menuBtnFilesClickHandler),t.$menuBtnLogout.off("click",t.menuBtnLogoutClickHandler),t.$menuBtnTranslations.off("click",t.menuBtnTranslationsClickHandler)},getMenuHtml:function(){var e='        <div class="cms-menu-bg cms-ui-hidden"></div>        <ul class="cms-menu cms-ui-hidden">        <li class="cms-menu-top"></li>        <li           class="cms-menu-item cms-menu-item-logout">          <span class="cms-menu-item-text">Logout</span>          <span class="cms-menu-item-icon cms-menu-item-icon-logout cms-anim-fade-250ms cms-unselectable">‚Ü≥</span>        </li>        <li           class="cms-menu-item cms-menu-item-files">          <span class="cms-menu-item-text">File Manager</span>          <span class="cms-menu-item-icon cms-menu-item-icon-files cms-anim-fade-250ms cms-unselectable">üìÇ</span>        </li>        <li           class="cms-menu-item cms-menu-item-meta">          <span class="cms-menu-item-text">Meta Info</span>          <span class="cms-menu-item-icon cms-menu-item-icon-meta cms-anim-fade-250ms cms-unselectable">üìù</span>        </li>        <li           class="cms-menu-item cms-menu-item-preview">          <span class="cms-menu-item-text">Preview</span>          <span class="cms-menu-item-icon cms-menu-item-icon-preview cms-anim-fade-250ms cms-unselectable">üëÅ</span>        </li>        <li           class="cms-menu-item cms-menu-item-translations">          <span class="cms-menu-item-text">Translations</span>          <span class="cms-menu-item-icon cms-menu-item-icon-translations cms-anim-fade-250ms cms-unselectable">üåé</span>        </li>        <li           class="cms-menu-item cms-menu-item-save">          <span class="cms-menu-item-text">Save to zip</span>          <span class="cms-menu-item-icon cms-menu-item-icon-save cms-anim-fade-250ms cms-unselectable">üíæ</span>        </li>        <li id="menu-header-sections" class="cms-menu-header cms-menu-header-sections">          <span class="cms-menu-item-text">Sections:</span>        </li>        <li id="menu-item-add-section" class="cms-menu-header cms-menu-item-add-section cms-unselectable">          Add Section +        </li>';return e+=t.getSectionsAsMenuItems(),e+="</ul>"},getSectionsAsMenuItems:function(){var e="",n=t.getSections();return n.each(function(a,t){var r=n.children()[t].getAttribute("data-name")||"section"+(t+1),o=i(a).children().find("[contenteditable]:not(:empty)")[0];o=o?o.innerText.substring(0,100):"...",e+='      <li         id="menu-item-'+(t+1)+'"         class="cms-menu-item cms-menu-section-item">        <span class="cms-menu-item-text"><a href="#section'+(t+1)+'">'+r+'</a></span>        <p class="cms-menu-section-item-desc">'+o+'</p>        <span class="cms-menu-item-icon  cms-menu-item-icon-up      cms-anim-fade-250ms cms-unselectable">·êÉ</span>        <span class="cms-menu-item-icon  cms-menu-item-icon-down    cms-anim-fade-250ms cms-unselectable">·êÅ</span>        <span class="cms-menu-item-icon  cms-menu-item-icon-delete  cms-anim-fade-250ms cms-unselectable">‚Öπ</span>      </li>'}),e},getSections:function(){var e=i(cms.config.sectionSelector);return e},menuBgClickHandler:function(e){t.hideMenu()},menuBtnClickHandler:function(e){t.toggleMenu()},menuItemUpClickHandler:function(e){var n=i(this.parentNode),a=i(n).prev(),r=n.attr("id").replace("menu-item-","");"menu-item-1"!==n.attr("id")&&(n.after(a),t.reIndexMenuItems(),cms.sectionManager.moveSectionUp(r),cms.sectionManager.reIndexSections())},menuItemDownClickHandler:function(e){var n=i(this.parentNode),a=i(n).next(),r=n.attr("id").replace("menu-item-","");a.after(n),t.reIndexMenuItems(),cms.sectionManager.moveSectionDown(r),cms.sectionManager.reIndexSections()},menuItemDeleteClickHandler:function(e){var n=i(this.parentNode),a=n.attr("id").replace("menu-item-","");return i(cms.config.sectionSelector).length<2?!1:(n.remove(),t.reIndexMenuItems(),cms.sectionManager.removeSection(a),void cms.sectionManager.reIndexSections())},menuBtnSaveClickHandler:function(e){cms.exportManager.savePage()},menuBtnPreviewClickHandler:function(e){cms.previewManager.previewPage()},menuBtnAddSectionClickHandler:function(e){cms.sectionManager.showUI()},menuBtnMetaClickHandler:function(e){cms.metaManager.showUI()},menuBtnFilesClickHandler:function(e){cms.fileManager.showUI()},menuBtnLogoutClickHandler:function(e){window.location.href=cms.config.api.logout},menuBtnTranslationsClickHandler:function(){cms.ui.hideMenu();var e=cms.exportManager.getPageHTMLWithoutCMS();e=cms.exportManager.addDocType(e),cms.exportManager.saveHtmlToFile(e,cms.translationManager.showUI)},reIndexMenuItems:function(){i(".cms-menu-section-item").each(function(e,n){var a=i(e);a.attr("id","menu-item-"+(n+1)),a.find("a").attr("href","#section"+(n+1))})},toggleMenu:function(){t.$menu.hasClass("cms-ui-hidden")?t.showMenu():t.hideMenu()},showMenu:function(){cms.saveProgress(),t.updateUI(),i(".cms-menu, .cms-menu-bg").addClass("cms-anim-fade-250ms "),t.$menu.removeClass("cms-ui-hidden"),t.$menuBg.removeClass("cms-ui-hidden"),t.$menuBtn.addClass("cms-menu-btn-on"),i("body").addClass("cms-noscroll")},updateUI:function(){var e=this.getMenuHtml();t.setUIEventHandlersOff(),i(".cms-menu-container").html(e),t.reIndexMenuItems(),t.getUIComponents(),t.setUIEventHandlers()},hideMenu:function(){i("body").removeClass("cms-noscroll"),t.$menu.addClass("cms-ui-hidden"),t.$menuBg.addClass("cms-ui-hidden"),t.$menuBtn.removeClass("cms-menu-btn-on"),cms.saveProgress()}}}),require.register("modules/video_manager.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){t=this,t.addVideoClickHandlers()},addVideoClickHandlers:function(){var e=i(cms.config.videoSelector);e.off("click",t.videoClickHandler),e.length>0&&(e.addClass("cms-editable-video"),e.on("click",t.videoClickHandler))},videoClickHandler:function(e){var n=this,a=t.getVideoSourceElems(n),i=[],i=t.createFieldsFromVideoSrcElems(a);i.length>0&&(t.currentVideo=n,t.showUI(i))},getVideoSourceElems:function(e){var n=i(e).children("source, img");return n},createFieldsFromVideoSrcElems:function(e){if(e.length<1)return"";for(var n=[],a=0;a<e.length;a++){var t=i(e[a]),r=e[a].tagName,o=t.attr("type"),s=t.attr("src");"IMG"===r?n[a]='<img class="cms-modal-input" id="video-poster" src="'+s+'" />':n[a]='<input class="cms-modal-input" id="video-source-'+a+'" data-type="'+o+'" data-index="'+a+'" value="'+s+'" />'}return n},showUI:function(e){var n="";e.forEach(function(e,a){var r=i(e).data("type"),o=i(e)[0].tagName,s=t.createUploadBtn(a),c=t.createUploadPosterBtn(a),l='<p class="cms-modal-title">'+r+"</p>";r&&(n+=l),n+=e,"IMG"===o&&(n+=c),"INPUT"===o&&(n+=s)}),cms.modal.create({title:"Video Manager",contents:n}),cms.modal.show();var a=i(".cms-modal-upload-btn");a.each(function(e){var n=i(e);t.fileBtnClickHandler(n)}),t.posterImgBtnClickHandler(i(".cms-modal-upload-poster-btn"))},fileBtnClickHandler:function(e){e.on("change",function(n){var a=this.files[0];if(!a)return!1;var r=this.files[0].name,o="videos/"+r,s=i(this).parent().prev("input"),c=s.attr("id"),l=i("#"+c).data("index");t.currentVideoUrl=o,t.currentSrcElem=l,t.$currentBtn=i(this).prev("label"),t.$currentBtns=i(".cms-modal-upload-label"),t.updateUploadBtns(t.$currentBtn,t.$currentBtns),e.prop("disabled",!0),t.uploadFile(n,a),e.prop("disabled",!1)})},updateUploadBtns:function(e,n){e.removeClass("cms-modal-upload-label-error"),e.addClass("cms-modal-upload-label-uploading"),i(e).parent().children(".cms-loader").removeClass("cms-loader-hidden"),n.css("pointer-events","none")},uploadFile:function(e,n){var a=new FormData(this);a.append("video",n,n.name),e.preventDefault(),cms.ajax.create("POST",cms.config.api.upload),t.setUploadEventHandlers(),cms.ajax.send(a)},setUploadEventHandlers:function(){var e=t.$currentBtn,n=t.$currentBtns,a=function(n){var a=Math.floor(n.loaded/n.total*100)+"%";e.html("Uploading "+a)},r=function(a){console.log(a),t.updateVideoOnPage(),i("#video-source-"+t.currentSrcElem).val(t.currentVideoUrl),e.html("Upload video"),e.removeClass("cms-modal-upload-label-uploading"),i(e).parent().children(".cms-loader").addClass("cms-loader-hidden"),n.css("pointer-events","all")},o=function(n){console.log(n),e.html("Upload error"),e.addClass("cms-modal-upload-label-error"),i(e).parent().children(".cms-loader").addClass("cms-loader-hidden")};cms.ajax.onProgress(a),cms.ajax.onFinish(r,o)},updateVideoOnPage:function(){var e=i(t.currentVideo),n=i(e),a=n.children("source").eq(t.currentSrcElem)[0];a||(a=n.children("source").eq(t.currentSrcElem)),i(a).attr("src",t.currentVideoUrl)},posterImgBtnClickHandler:function(e){e.on("change",function(n){var a=this.files[0];if(!a)return!1;var r=this.files[0].name,o="images/"+r,s=i(this).parent().prev("img"),c=s.attr("id"),l=i("#"+c).data("index");t.currentImgUrl=o,t.currentImgSrcElem=l,t.$currentBtn=i(this).prev("label"),t.$currentBtns=i(".cms-modal-upload-label"),t.updateUploadBtns(t.$currentBtn,t.$currentBtns),t.updatePreviewImage(s,a),e.prop("disabled",!0),t.uploadImage(n,a),e.prop("disabled",!1)})},updatePreviewImage:function(e,n){var a=new FileReader;a.addEventListener("load",function(){e.attr("src",a.result)},!1),n&&a.readAsDataURL(n)},uploadImage:function(e,n){var a=new FormData(this);a.append("image",n,n.name),e.preventDefault(),cms.ajax.create("POST",cms.config.api.upload),t.setImageUploadEventHandlers(),cms.ajax.send(a)},setImageUploadEventHandlers:function(){var e=t.$currentBtn,n=t.$currentBtns,a=function(n){var a=Math.floor(n.loaded/n.total*100)+"%";e.html("Uploading "+a)},r=function(a){console.log(a),t.updateposterImage(),e.html("Upload poster image"),e.removeClass("cms-modal-upload-label-uploading"),i(e).parent().children(".cms-loader").addClass("cms-loader-hidden"),n.css("pointer-events","all")},o=function(n){console.log(n),e.html("Upload error"),e.addClass("cms-modal-upload-label-error"),i(e).parent().children(".cms-loader").addClass("cms-loader-hidden")};cms.ajax.onProgress(a),cms.ajax.onFinish(r,o)},updateposterImage:function(){var e=i(t.currentVideo).children("img");e.attr("src",t.currentImgUrl),i(t.currentVideo).attr("poster",t.currentImgUrl)},createUploadBtn:function(e){var n='      <form id="cms-upload-form-'+e+'" action="/api/upload.php" method="post" class="cms-upload-form cms-upload-form-'+e+'" enctype="multipart/form-data">\n        <div class="cms-loader cms-loader-hidden"></div>\n        <label for="file-upload-'+e+'" id="file-upload-label-'+e+'" class="cms-modal-upload-label">Upload a video</label>\n        <input name="video" type="file" id="file-upload-'+e+'" class="cms-modal-upload-btn"  />\n      </form>';return n},createUploadPosterBtn:function(e){var n='      <form id="cms-upload-form-'+e+'" action="/api/upload.php" method="post" class="cms-upload-form cms-upload-form-'+e+'" enctype="multipart/form-data">\n        <div class="cms-loader cms-loader-hidden"></div>\n        <label for="file-upload-'+e+'" id="file-upload-label-'+e+'" class="cms-modal-upload-label">Upload poster image</label>\n        <input name="image" type="file" id="file-upload-'+e+'" class="cms-modal-upload-poster-btn"  />\n      </form>';return n}}}),require.register("modules/vocab_editor.js",function(e,n,a){var t,i=n("cash-dom");a.exports={init:function(){return t=cms.vocabEditor,i("[contenteditable]").attr("contenteditable",!1),t.shouldShowUI()&&t.showUI(),!0},shouldShowUI:function(){var e=t.getCurrentService(),n=cms.getLangInfo(e),a=t.getQueryVariable("translate")&&"undefined"!=n.code;return a?!0:!1},showUI:function(){t.getPreviewPageHtml(t.getEnVocabFromPreview)},getCurrentService:function(){var e=t.getQueryVariable("translate")||t.getQueryVariable("preview")||cms.lang.code||i("html").attr("lang");return e},getPreviewPageHtml:function(e){var n=(t.getCurrentService(),function(n){return e(n),n}),a=function(e){return console.log(e),!1};cms.ajax.create("GET","preview.html"),cms.ajax.onFinish(n,a),cms.ajax.send(null)},getEnVocabFromPreview:function(e){var n=t.getCurrentService(),a=t.createNewVocab(n),r=i(e),o=cms.config.sectionSelector,s='meta[name^="title"], meta[name^="description"], meta[name^="author"], meta[name^="keywords"], meta[name^="news_keywords"], meta[name^="copyright"], meta[name^="twitter"], meta[property], meta[itemprop]',c="h1, h2, p, blockquote, li, video source, picture source, img",l=0;r.each(function(e){var n=i.matches(e,s),t=i.matches(e,o);if(e.nodeType!=Node.TEXT_NODE){if(n){var r=i(e).attr("itemprop")||i(e).attr("property")||i(e).attr("name"),m=i(e).attr("content"),d={};d[r]=m,a.meta.push(d)}if(t){var u="section"+(l+1);a[u]=[],i(e).each(function(e,n){var t=i(e).find(c);t.each(function(e){var n=e.tagName.toLowerCase(),t=e.innerText||i(e).attr("src")||i(e).attr("srcset")||e.innerHTML,r={};t&&(r[n]=t.trim(),a[u].push(r))})}),l++}}}),t.pageVocab=a,t.getVocabFileContents(function(e){t.vocab=JSON.parse(e),t.buildTranslatorUI()})},getVocabFileContents:function(e){var n=t.getCurrentService(),a=function(n){return t.vocab=n,e(n),n},i=function(n){return e(JSON.stringify(t.pageVocab)),t.pageVocab};cms.ajax.create("GET","vocabs/"+n+".json"),cms.ajax.onFinish(a,i),cms.ajax.send(null)},buildTranslatorUI:function(){var e=t.getCurrentService(),n=cms.getLangInfo(e),a=t.createVocabEditorForm();cms.modal.create({title:"Translate to "+n.name,contents:a}),cms.modal.show(),i(".cms-modal-back-btn").html("Preview"),t.addEventHandlers()},createNewVocab:function(e){var n={};return n.html=[{lang:e}],n.meta=[],n},createVocabEditorForm:function(){var e=t.getCurrentService(),n='<form class="cms-vocab-form" data-lang="'+e+'" action="'+cms.config.api.upload+'" method="post">\n',a=t.createVocabEditorFormFields();return n+=a,n+='<button class="cms-modal-btn">Preview Translation</button>\n',n+="</form>\n"},createVocabEditorFormFields:function(){var e=t.getCurrentService(),n=cms.getLangInfo(e),a=t.pageVocab,i=t.vocab||t.pageVocab,r="",o=n.direction;return Object.keys(a).forEach(function(n){var t=a[n];sectionName=n,r+="<h3>"+n+"</h3>",t.forEach(function(n,s){var c=Object.keys(t[s]),l=Object.values(t[s]),m=a[sectionName][s][c];i.hasOwnProperty(sectionName)&&(m=a[sectionName][s][c],"undefined"!=typeof i[sectionName][s]&&(m=i[sectionName][s][c]||a[sectionName][s][c])),"lang"==c&&(l="en"),r+='<table>\n        <tr>\n        <td>\n          <label class="cms-modal-title cms-vocab-title cms-vocab-title-left">'+c+"</label>\n          <textarea disabled />"+l+'</textarea>\n        </td>        <td>\n          <label class="cms-modal-title cms-vocab-title cms-vocab-title-right">&nbsp;</label>\n          <textarea             class="cms-modal-input             cms-vocab-input"             data-name="'+c+'"             data-lang="'+e+'"             data-section="'+sectionName+'"             dir="'+o+'"             name="'+c+'" />'+m.trim()+"</textarea>\n        </td>\n        </tr>\n        </table>\n"})}),r},addEventHandlers:function(){i(".cms-modal-viewport .cms-vocab-form").find("textarea").each(function(){this.style.height="8px",this.style.height=this.scrollHeight+"px"}),i(".cms-vocab-input").on("keypress",function(e){this.style.height="8px",this.style.height=this.scrollHeight+"px",13===e.which&&e.preventDefault(),i(this).removeClass("cms-vocab-uploaded"),i(".cms-vocab-input").removeClass("cms-upload-label-error")}),i(".cms-vocab-input").on("blur",function(e){t.uploadVocab(e)}),i(".cms-modal-btn").on("click",function(e){e.preventDefault(),t.translatePage()}),i(".cms-modal-back-btn").on("click",function(e){e.preventDefault(),t.translatePage()})},uploadVocab:function(e){var n=t.getCurrentService(),a=t.getFormVocab(),r=t.createVocabFile(a),o=n+".json",s=new FormData(this);s.append("vocab",r,o),e.preventDefault();var c=function(e){console.log(e),i(".cms-vocab-input").addClass("cms-vocab-uploaded")},l=function(e){console.log(e),i(".cms-vocab-input").addClass("cms-upload-label-error")};cms.ajax.create("POST",cms.config.api.upload),cms.ajax.onFinish(c,l),cms.ajax.send(s)},getFormVocab:function(){var e,n="{ ";return i(".cms-vocab-input").each(function(){var a=i(this),t=a.data("section"),r=i(this).parents("table").next(),o=a.data("name"),s=a.val(),c=i(r).find(".cms-vocab-input")[0],l=t;l=c?i(c).data("section"):"none",t!=e&&(n+='"'+t+'" : [ '),n+='{ "'+o+'": '+JSON.stringify(s)+" }","BUTTON"==r[0].tagName?n+=" ] ":t!=l&&(n+=" ], "),t==l&&(n+=", "),e=t}),n+="}"},createVocabFile:function(e){return new Blob([e],{type:"text/plain"})},getVocabAsJSON:function(e){return JSON.stringify(e,void 0,2)},downloadVocabAsFile:function(e,n){var a=document.createElement("a"),i=t.createVocabFile(e);a.href=URL.createObjectURL(i),a.download=n,a.click()},getQueryVariable:function(e){for(var n=window.location.search.substring(1),a=n.split("&"),t=0;t<a.length;t++){var i=a[t].split("=");if(i[0]==e)return i[1]}return!1},translatePage:function(){var e="",n="",a="",r='meta[name^="title"], meta[name^="description"], meta[name^="author"], meta[name^="keywords"], meta[name^="news_keywords"], meta[name^="copyright"], meta[name^="twitter"], meta[property], meta[itemprop]';e=document.createElement("HTML"),t.getPreviewPageHtml(function(o){e.innerHTML=o,n=i(e),t.getVocabFileContents(function(e){var e=JSON.parse(e),i="";n.find(r).each(function(n,a){n.content=Object.values(e.meta[a])[0],i=a}),n.find("title").html(e.meta[0].title),cms.config.editableItems.forEach(function(e){a+=e+","}),a=a.slice(0,-1);var s=1;n.find(a).each(function(a,t){var i="section"+s,r="",o=0,c=[];e[i]&&(Object.values(e[i]).forEach(function(e,a){var t=Object.keys(e)[0],s=(Object.values(e)[0],"");c[t]++,r!=t&&(c[t]=c[t]++||0),o=c[t],s=n.find("."+i).find(t)[o],s&&("img"==t&&s.src&&(s.src=Object.values(e)[0]),"source"==t&&s.srcset&&(s.srcset=Object.values(e)[0]),"source"!==t&&"source"!==t&&s.innerHTML&&(s.innerHTML=Object.values(e)[0])),r=t}),s++)});var c=t.getCurrentService(),l=cms.getLangInfo(c);l.code=c,n.find("*").removeAttr("style"),n.find("html, body").removeClass("en"),n.find("html, body").removeAttr("dir"),n.find("html, body").removeClass("rtl"),"rtl"===l.direction&&(n.find("html, body").attr("dir",l.direction),n.find("html, body").addClass(l.direction)),o=n.html(),cms.exportManager.saveTranslatedHTML(o)})})}}}),require.register("___globals___",function(e,n,a){})}(),require("___globals___");